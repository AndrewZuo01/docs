---
title: 根据seq获取消息
hide_title: true
---

<center>

## 通过 seq 拉取消息

</center>

### 简要描述

- 通过 seq 列表拉取消息（管理员和用户本人可调用）

### 请求方式

- `post`

### 请求 URL

- `{{host}}/msg/pull_msg_by_seq`

### Header

| header 名   | 示例值                                                                                                                                                                                                   | 选填 | 类型   | 说明                         |
| :---------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--- | ------ | ---------------------------- |
| operationID | testGordon1111                                                                                                                                                                                           | 必填 | string | operationID 用于全局链路追踪 |
| token       | eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOiIxMTA5NzkyMTQwIiwiUGxhdGZvcm1JRCI6MSwiZXhwIjoxNjk1OTAzNjc5LCJuYmYiOjE2ODgxMjczNzksImlhdCI6MTY4ODEyNzY3OX0.YzU9Twr7UsfnX4ozrBohFbVDqMRpURzo9ENCVdFN1KY | 必填 | string | 管理员或者用户 token         |

### 请求参数示例

```json
{
  "userID": "9906953281",
  "order": 0,
  "seqRanges": [
    {
      "conversationID": "si_2699373280_9906953281",
      "begin": 1,
      "end": 10,
      "num": 10
    }
  ]
}
```

| 字段名                   | 选填 | 类型   | 说明                     |
| :----------------------- | :--- | :----- | ------------------------ |
| userID                   | 必填 | string | 需要获取消息的用户 ID    |
| order                    | 必填 | string | 排序，0 为升序，1 为降序 |
| seqRanges                | 必填 | array  | 要拉取的会话列表         |
| seqRanges.conversationID | 必填 | string | 会话 ID                  |
| seqRanges.begin          | 必填 | string | 开始的 seq               |
| seqRanges.end            | 必填 | string | 结束的 seq               |
| seqRanges.num            | 必填 | string | 要拉取的消息数量         |

### 成功返回示例

```json
{
  "errCode": 0,
  "errMsg": "",
  "errDlt": "",
  "data": {
    "msgs": {
      "si_2699373280_9906953281": {
        "Msgs": [
          {
            "sendID": "2699373280",
            "recvID": "9906953281",
            "groupID": "",
            "clientMsgID": "2b87cc4f94a8c8e23ebf428945af078f",
            "serverMsgID": "4254e21dd62a91a8cc9c0c9dee8795ed",
            "senderPlatformID": 0,
            "senderNickname": "",
            "senderFaceURL": "",
            "sessionType": 1,
            "msgFrom": 200,
            "contentType": 1201,
            "content": "eyJkZXRhaWwiOiJ7XCJmcm9tVG9Vc2VySURcIjp7XCJmcm9tVXNlcklEXCI6XCI5OTA2OTUzMjgxXCIsXCJ0b1VzZXJJRFwiOlwiMjY5OTM3MzI4MFwifSxcImhhbmRsZU1zZ1wiOlwiXCJ9In0=",
            "seq": 1,
            "sendTime": 1687753720586,
            "createTime": 1687753720585,
            "status": 0,
            "isRead": false,
            "options": {
              "offlinePush": true
            },
            "offlinePushInfo": {
              "title": "",
              "desc": "",
              "ex": "",
              "iOSPushSound": "",
              "iOSBadgeCount": false,
              "signalInfo": ""
            },
            "atUserIDList": null,
            "attachedInfo": "",
            "ex": ""
          },
          {
            "sendID": "9906953281",
            "recvID": "2699373280",
            "groupID": "",
            "clientMsgID": "bedb98c0c9eb10bbd9d408190f98bb13",
            "serverMsgID": "fda38535454d217b50b946851a81dfbf",
            "senderPlatformID": 2,
            "senderNickname": "chao",
            "senderFaceURL": "",
            "sessionType": 1,
            "msgFrom": 100,
            "contentType": 104,
            "content": "eyJ2aWRlb1BhdGgiOiIvc3RvcmFnZS9lbXVsYXRlZC8wL01vdmllcy9SRUM1NTcwMDk4NjQwNDg3MjMxMDY4Lm1wNCIsInZpZGVvVXJsIjoiaHR0cDovLzIwMy41Ni4xNzUuMjMzOjEwMDAyL3RoaXJkL29iamVjdD9uYW1lPTk5MDY5NTMyODFfdmlkZW9fYmVkYjk4YzBjOWViMTBiYmQ5ZDQwODE5MGY5OGJiMTMubXA0IiwidmlkZW9UeXBlIjoidmlkZW8vbXA0IiwidmlkZW9TaXplIjoxMjY1NTI3NSwiZHVyYXRpb24iOjEsInNuYXBzaG90UGF0aCI6Ii9zdG9yYWdlL2VtdWxhdGVkLzAvQW5kcm9pZC9kYXRhL2NuLnJlbnRzb2Z0LmZsdXR0ZXIub3BlbmltLmNvbnN1bWVyL2ZpbGVzL3ZpZGVvX2NvbXByZXNzL1JFQzU1NzAwOTg2NDA0ODcyMzEwNjguanBnIiwic25hcHNob3RTaXplIjozMzM5Mywic25hcHNob3RVcmwiOiJodHRwOi8vMjAzLjU2LjE3NS4yMzM6MTAwMDIvdGhpcmQvb2JqZWN0P25hbWU9OTkwNjk1MzI4MV92aWRlb1NuYXBzaG90X2JlZGI5OGMwYzllYjEwYmJkOWQ0MDgxOTBmOThiYjEzLmpwZyIsInNuYXBzaG90V2lkdGgiOjI4OCwic25hcHNob3RIZWlnaHQiOjUxMn0=",
            "seq": 2,
            "sendTime": 1687753744913,
            "createTime": 1687753734397,
            "status": 1,
            "isRead": false,
            "options": null,
            "offlinePushInfo": {
              "title": "你收到了一条新消息",
              "desc": "",
              "ex": "",
              "iOSPushSound": "+1",
              "iOSBadgeCount": true,
              "signalInfo": ""
            },
            "atUserIDList": null,
            "attachedInfo": "",
            "ex": ""
          },
          {
            "sendID": "2699373280",
            "recvID": "9906953281",
            "groupID": "",
            "clientMsgID": "ea66b4263042d65840a8bdc71405e31e",
            "serverMsgID": "9d61f580c6fb2a13d3866005bde09900",
            "senderPlatformID": 1,
            "senderNickname": "2234",
            "senderFaceURL": "",
            "sessionType": 1,
            "msgFrom": 100,
            "contentType": 107,
            "content": "eyJ0aXRsZSI6Ilvop4bpopFdIiwiYWJzdHJhY3RMaXN0IjpbIjMyMzQ6W+inhumikV0iXSwibXVsdGlNZXNzYWdlIjpbeyJjbGllbnRNc2dJRCI6ImU1MTUwMDUxYjRkNzJiYTNlZGRkYmIxYTAxOWNiNmNmIiwic2VydmVyTXNnSUQiOiJhOTBiYmUzNTA1OTQ4ODVjNWY2MTZmYjgyM2RhNDEzZiIsImNyZWF0ZVRpbWUiOjE2ODc3NjU4NTU0NTMsInNlbmRUaW1lIjoxNjg3NzY1ODU4NTkzLCJzZXNzaW9uVHlwZSI6MSwic2VuZElEIjoiNDMzOTU0NTgzNCIsInJlY3ZJRCI6IjI2OTkzNzMyODAiLCJtc2dGcm9tIjoxMDAsImNvbnRlbnRUeXBlIjoxMDQsInNlbmRlclBsYXRmb3JtSUQiOjAsInNlbmRlck5pY2tuYW1lIjoiMzIzNCIsInNlcSI6NTcsImlzUmVhZCI6dHJ1ZSwic3RhdHVzIjoyLCJvZmZsaW5lUHVzaCI6eyJ0aXRsZSI6IiIsImRlc2MiOiIiLCJleCI6IiIsImlPU1B1c2hTb3VuZCI6IiIsImlPU0JhZGdlQ291bnQiOnRydWUsInNpZ25hbEluZm8iOiIifSwidmlkZW9FbGVtIjp7InZpZGVvUGF0aCI6Ii92YXIvbW9iaWxlL0NvbnRhaW5lcnMvRGF0YS9BcHBsaWNhdGlvbi9GREREOUU5QS0wQUFCLTRERTQtOUY4My02OEIxOEYzNUMyNDUvRG9jdW1lbnRzL09wZW5JTS92aWRlby9hNDQ3ODkwZWMzMmRjOTRkYTAyNTk5NDUzYzI3OTMwZi5tcDQiLCJ2aWRlb1VybCI6Imh0dHA6Ly8yMDMuNTYuMTc1LjIzMzoxMDAwMi90aGlyZC9vYmplY3Q/bmFtZT00MzM5NTQ1ODM0X3ZpZGVvX2U1MTUwMDUxYjRkNzJiYTNlZGRkYmIxYTAxOWNiNmNmLm1wNCIsInZpZGVvVHlwZSI6Im1wNCIsInZpZGVvU2l6ZSI6MjM1ODI4MiwiZHVyYXRpb24iOjIsInNuYXBzaG90UGF0aCI6Ii92YXIvbW9iaWxlL0NvbnRhaW5lcnMvRGF0YS9BcHBsaWNhdGlvbi9GREREOUU5QS0wQUFCLTRERTQtOUY4My02OEIxOEYzNUMyNDUvRG9jdW1lbnRzL09wZW5JTS9pbWFnZS9pbWFnZV8yMDIzLTA2LTI2LTUwLTU1LjI0NS5wbmciLCJzbmFwc2hvdFNpemUiOjE3MTY5MzksInNuYXBzaG90VXJsIjoiaHR0cDovLzIwMy41Ni4xNzUuMjMzOjEwMDAyL3RoaXJkL29iamVjdD9uYW1lPTQzMzk1NDU4MzRfdmlkZW9TbmFwc2hvdF9lNTE1MDA1MWI0ZDcyYmEzZWRkZGJiMWEwMTljYjZjZi5wbmciLCJzbmFwc2hvdFdpZHRoIjo3MjAsInNuYXBzaG90SGVpZ2h0IjoxMjgwfSwiYXR0YWNoZWRJbmZvRWxlbSI6eyJncm91cEhhc1JlYWRJbmZvIjp7Imhhc1JlYWRDb3VudCI6MCwiZ3JvdXBNZW1iZXJDb3VudCI6MH0sImlzUHJpdmF0ZUNoYXQiOmZhbHNlLCJidXJuRHVyYXRpb24iOjAsImhhc1JlYWRUaW1lIjowLCJub3RTZW5kZXJOb3RpZmljYXRpb25QdXNoIjpmYWxzZSwiaXNFbmNyeXB0aW9uIjpmYWxzZSwiaW5FbmNyeXB0U3RhdHVzIjpmYWxzZX19XX0=",
            "seq": 3,
            "sendTime": 1687766446077,
            "createTime": 1687766443527,
            "status": 1,
            "isRead": false,
            "options": null,
            "offlinePushInfo": {
              "title": "你收到了一条消息",
              "desc": "你收到了一条消息",
              "ex": "",
              "iOSPushSound": "",
              "iOSBadgeCount": false,
              "signalInfo": ""
            },
            "atUserIDList": null,
            "attachedInfo": "",
            "ex": ""
          }
        ],
        "isEnd": true
      }
    },
    "notificationMsgs": null
  }
}
```

### 成功返回示例的参数说明

| 参数名                             | 类型   | 说明                                                                                                                           |
| :--------------------------------- | :----- | :----------------------------------------------------------------------------------------------------------------------------- |
| list                               | array  | 单聊以及写扩散群聊消息列表                                                                                                     |
| list.sendID                        | string | 发送者 ID(可以为管理员 ID，可以为用户 ID)                                                                                      |
| list.recvID                        | string | 接收者 ID                                                                                                                      |
| list.groupID                       | string | 群聊 ID，单聊为空                                                                                                              |
| list.clientMsgID                   | string | 客户端消息 ID，此 ID 为消息唯一 ID                                                                                             |
| list.serverMsgID                   | string | 服务器消息 ID，预留字段                                                                                                        |
| list.senderPlatformID              | string | 发送者平台号， 1-&gt;IOS,2-&gt;Android,3-&gt;Windows,4-&gt;OSX,5-&gt;Web,5-&gt;MiniWeb,7-&gt;Linux,8-&gt;AndroidPad,9-&gt;IPad |
| list.senderNickname                | string | 发送者昵称                                                                                                                     |
| list.senderFaceURL                 | string | 发送者头像                                                                                                                     |
| list.sessionType                   | string | 会话类型，单聊为 1，群聊（普通写扩散）为 2,大群(读扩散接口)为 3，通知会话为 4                                                  |
| list.msgFrom                       | string | 消息来源，100 来源于用户发送，200 来源于管理员发送或者系统广播通知等                                                           |
| list.contentType                   | string | 消息类型，101 表示文本，102 表示图片..详细参考消息类型格式描述文档                                                             |
| list.content                       | string | 消息具体内容                                                                                                                   |
| list.seq                           | string | 消息唯一序列号 ID                                                                                                              |
| list.sendTime                      | string | 消息发送时间                                                                                                                   |
| list.createTime                    | string | 消息创建时间                                                                                                                   |
| list.status                        | string | 消息状态，具体查看消息状态码描述                                                                                               |
| list.options                       | object | 消息附属开关字段，具体查看消息 options 描述                                                                                    |
| list.offlinePushInfo               | object | 离线推送的具体内容                                                                                                             |
| list.offlinePushInfo.title         | string | 推送的标题                                                                                                                     |
| list.offlinePushInfo.desc          | string | 推送的具体描述                                                                                                                 |
| list.offlinePushInfo.ex            | string | 扩展字段                                                                                                                       |
| list.offlinePushInfo.iOSPushSound  | string | IOS 的推送声音                                                                                                                 |
| list.offlinePushInfo.iOSBadgeCount | string | IOS 推送消息是否计入桌面图标未读数                                                                                             |
| list.atUserIDList                  | object | 强推用户列表，仅仅在群聊下有效                                                                                                 |
| list.msgDataList                   | object | 预留字段                                                                                                                       |
| list.attachedInfo                  | string | 消息附加信息                                                                                                                   |
| list.ex                            | string | 扩展字段                                                                                                                       |
| groupMsgDataList                   | object | 群聊消息对象，k 为群 ID，v 为消息列表                                                                                          |
| groupMsgDataList.msgDataList       | array  | 单个群的消息列表，其中类型                                                                                                     |

### 失败返回示例

```json
{
  "errCode": 1001,
  "errMsg": "ArgsError",
  "errDlt": "invalid character ':' after object key:value pair"
}
```

### 失败返回示例的参数说明

| 参数名  | 类型   | 说明                          |
| :------ | :----- | :---------------------------- |
| errCode | int    | 错误码,具体查看全局错误码文档 |
| errMsg  | string | 错误简要信息                  |
| errDlt  | errDlt | 错误详细信息                  |
